<!DOCTYPE html>
<html>

<head>
    <title>I N L O</title>

    <link rel="stylesheet" href="public/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Ubuntu" />
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

</head>

<body style="font-family: Ubuntu;">

    <nav class="shadow navbar navbar-expand-lg navbar-dark" style="background: black; font-size: 18px;">
        <a href="MainPage.html" class="navbar-brand">
            <kbd style="color: #58FF33;">I N L O | A D M I N</kbd>
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
            aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
                <span style="padding-right: 20px;"></span>
                <li class="nav-item">
                    <a href="bank-info.html" class="nav-link">
                        <i class="d-lg-none mr-2 fa fa-users"></i>
                        Banks
                    </a>
                </li>
                <li class="nav-item">
                    <a href="loan-info.html" class="nav-link font-weight-normal">
                        <i class="d-lg-none mr-2 fa fa-cogs"></i>
                        Loans
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link">
                        <i class="d-lg-none mr-2 fa fa-slack"></i>
                        Ideas
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link">
                        <i class="d-lg-none mr-2 fa fa-files-o"></i>
                        Comments
                    </a>
                </li>
            </ul>

            <form class="form-inline mt-0 ml-auto">
                <div class="input-group">
                    <input type="search" class="form-control form-control-sm bg-light"
                        style="color: rgb(6, 6, 7); width: 400px;" placeholder="Search">
                    <div class="input-group-append">
                        <button class="input-group-text btn btn-outline-warning"><i class="fa fa-search"></i>
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </nav>

    <div class="container-fluid mt-5 mb-5">
        <div class="shadow d-flex card">
            <div class="shadow d-flex mt-4 card-body">
                <div class="container-fluid">
                    <div class="ml-3">
                        <div class="d-flex">
                            <a href="add-bank.html" class="btn btn-sm btn-primary">A D D B A N K</a>
                            <a href="bank-info.html" class="ml-3 btn btn-sm btn-primary">S H O W B A N K</a>
                        </div>
                        <h1 class="mt-3">B A N K I N F O</h1>
                        <div class="mt-3">
                            <script>
                                var counter = 0;
                            </script>
                            <div id="bankid">

                            </div>

                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>


    <script type="text/javascript" src="public/js/jquery.js"> </script>
    <script type="text/javascript" src="public/js/bootstrap.min.js"> </script>
    <script src="https://www.gstatic.com/firebasejs/7.6.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.6.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.6.1/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.6.1/firebase-storage.js"></script>
    <script src="public/js/index.js"></script>


    <script>
        var banksinfo = firebase.database().ref().child("bankinfo").orderByChild("counter");


        banksinfo.on("value", function (banks) {
            if (banks.exists()) {
                var banksHtml = "";

                banks.forEach(function (singleBank) {
                    counter = counter + 1;
                    
                    console.log(singleBank.key);
                    console.log(singleBank.val());
                    var tt = 'http://127.0.0.1:5500/edit-bank.html?id=-LxKi3rjKV59jFRduko6';
                    console.log(tt.split('?')[1].split('=')[1])
                    banksHtml +="<div class='card shadow p-3'>"
                    banksHtml += "<h4>"
                    banksHtml += singleBank.val().stockCode;
                    banksHtml += "</h4><hr>"

                    banksHtml += "<div class='row'>";
                    banksHtml += "<div class='col-3 p-1' style='text-align:center;'> <b>";
                    banksHtml += "Address"
                    banksHtml += "</b></div><div class='col-9 p-1'>";
                    banksHtml += singleBank.val().address;
                    banksHtml += "</div></div>"
                    
                    banksHtml += "<div class='row'>";
                    banksHtml += "<div class='col-3 p-1' style='text-align:center;'> <b>";
                    banksHtml += "Known As"
                    banksHtml += "</b></div><hr><div class='col-9 p-1'>";
                    banksHtml += singleBank.val().knownAs;
                    banksHtml += "</div></div>"

                    banksHtml += "<div class='row'>";
                    banksHtml += "<div class='col-3 p-1' style='text-align:center;'> <b>";
                    banksHtml += "Stock Code"
                    banksHtml += "</b></div><hr><div class='col-9 p-1'>";
                    banksHtml += singleBank.val().stockCode;
                    banksHtml += "</div></div>"

                    banksHtml += "<div class='row'>";
                    banksHtml += "<div class='col-3 p-1' style='text-align:center;'> <b>";
                    banksHtml += "S W I F T C O D E"
                    banksHtml += "</b></div><hr><div class='col-9 p-1'>";
                    banksHtml += singleBank.val().swiftCode;
                    banksHtml += "</div></div>"

                    banksHtml += "<div class='row'>";
                    banksHtml += "<div class='col-3 p-1' style='text-align:center;'> <b>";
                    banksHtml += "C A T E G O R Y"
                    banksHtml += "</b></div><hr><div class='col-9 p-1'>";
                    banksHtml += singleBank.val().category;
                    banksHtml += "</div></div>"

                    banksHtml += "<div class='row'>";
                    banksHtml += "<div class='col-3 p-1' style='text-align:center;'> <b>";
                    banksHtml += "O R I G I N"
                    banksHtml += "</b></div><hr><div class='col-9 p-1'>";
                    banksHtml += singleBank.val().origin;
                    banksHtml += "</div></div>"

                    banksHtml += "<div class='row'>";
                    banksHtml += "<div class='col-3 p-1' style='text-align:center;'> <b>";
                    banksHtml += "T Y P E"
                    banksHtml += "</b></div><hr><div class='col-9 p-1'>";
                    banksHtml += singleBank.val().type;
                    banksHtml += "</div></div>"

                    banksHtml += "<div class='row'>";
                    banksHtml += "<div class='col-3 p-1' style='text-align:center;'> <b>";
                    banksHtml += "Description"
                    banksHtml += "</b></div><hr><div class='col-9 p-1'>";
                    banksHtml += singleBank.val().description;
                    banksHtml += "</div></div>"
                    
                    banksHtml += "<div class='row'>";
                    banksHtml += "<div class='col-3 p-1' style='text-align:center;'> <b>";
                    banksHtml += "Services"
                    banksHtml += "</b></div><hr><div class='col-9 p-1'>";
                    banksHtml += singleBank.val().services;
                    banksHtml += "</div></div>"

                    banksHtml += "<div class='row'>";
                    banksHtml += "<div class='col-3 p-1' style='text-align:center;'> <b>";
                    banksHtml += "Established"
                    banksHtml += "</b></div><hr><div class='col-9 p-1'>";
                    banksHtml += singleBank.val().established;
                    banksHtml += "</div></div>"

                    banksHtml += "<div class='row'>";
                    banksHtml += "<div class='col-3 p-1' style='text-align:center;'> <b>";
                    banksHtml += "Website"
                    banksHtml += "</b></div><hr><div class='col-9 p-1'>";
                    banksHtml += singleBank.val().website;
                    banksHtml += "</div></div>"


                    banksHtml += "<div class='row'>";
                    banksHtml += "<div class='col-3 p-1' style='text-align:center;'> <b>";
                    banksHtml += "I M A G E"
                    banksHtml += "</b></div><hr><div class='col-9 p-1'>";
                    banksHtml += "<img class='img-thumbnail' src="
                    banksHtml += singleBank.val().image;
                    banksHtml +=" alt='Failed to Upload'/>"
                    banksHtml += "</div></div>"

                    banksHtml += "<div class='row'>";
                    banksHtml += "<div class='col-3 p-1' style='text-align:center;'> <b>";
                    banksHtml += " "
                    banksHtml += "</b></div><hr><div class='col-9 p-1'>";
                    banksHtml += "<a href='edit-bank.html?id="
                    banksHtml += singleBank.key
                    banksHtml += "' class='btn btn-sm btn-success'>E D I T</a> <button class='btn btn-sm btn-danger' onclick=deleteBank('"+singleBank.key+"')> DELETE</button> </div></div>"
                    banksHtml +="</div>"
                    


                    banksHtml +="</div>"

                });
                $("#bankid").html(banksHtml);
            }
        });

        function deleteBank(key){
            var dataDel = firebase.database().ref().child("bankinfo").child(key);
            return dataDel.remove().then(function(){
                console.log('Deleted Successfully');
            }).catch(function(){
                console.log('Error Occurred!');
            });
        }
    </script>

    <script>
        firebase.auth().onAuthStateChanged(function (user) {
            if (!user) {
                window.location.href = "signin.html";
            }
        });
    </script>


</body>

</html>